// Code generated by ent, DO NOT EDIT.

package repo

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/Alijeyrad/simorq_backend/internal/repo/clinic"
	"github.com/Alijeyrad/simorq_backend/internal/repo/clinicmember"
	"github.com/Alijeyrad/simorq_backend/internal/repo/patient"
	"github.com/Alijeyrad/simorq_backend/internal/repo/patientfile"
	"github.com/Alijeyrad/simorq_backend/internal/repo/patientprescription"
	"github.com/Alijeyrad/simorq_backend/internal/repo/patientreport"
	"github.com/Alijeyrad/simorq_backend/internal/repo/patienttest"
	"github.com/Alijeyrad/simorq_backend/internal/repo/predicate"
	"github.com/Alijeyrad/simorq_backend/internal/repo/user"
	"github.com/google/uuid"
)

// PatientUpdate is the builder for updating Patient entities.
type PatientUpdate struct {
	config
	hooks    []Hook
	mutation *PatientMutation
}

// Where appends a list predicates to the PatientUpdate builder.
func (_u *PatientUpdate) Where(ps ...predicate.Patient) *PatientUpdate {
	_u.mutation.Where(ps...)
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *PatientUpdate) SetUpdatedAt(v time.Time) *PatientUpdate {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetDeletedAt sets the "deleted_at" field.
func (_u *PatientUpdate) SetDeletedAt(v time.Time) *PatientUpdate {
	_u.mutation.SetDeletedAt(v)
	return _u
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableDeletedAt(v *time.Time) *PatientUpdate {
	if v != nil {
		_u.SetDeletedAt(*v)
	}
	return _u
}

// ClearDeletedAt clears the value of the "deleted_at" field.
func (_u *PatientUpdate) ClearDeletedAt() *PatientUpdate {
	_u.mutation.ClearDeletedAt()
	return _u
}

// SetClinicID sets the "clinic_id" field.
func (_u *PatientUpdate) SetClinicID(v uuid.UUID) *PatientUpdate {
	_u.mutation.SetClinicID(v)
	return _u
}

// SetNillableClinicID sets the "clinic_id" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableClinicID(v *uuid.UUID) *PatientUpdate {
	if v != nil {
		_u.SetClinicID(*v)
	}
	return _u
}

// SetUserID sets the "user_id" field.
func (_u *PatientUpdate) SetUserID(v uuid.UUID) *PatientUpdate {
	_u.mutation.SetUserID(v)
	return _u
}

// SetNillableUserID sets the "user_id" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableUserID(v *uuid.UUID) *PatientUpdate {
	if v != nil {
		_u.SetUserID(*v)
	}
	return _u
}

// SetPrimaryTherapistID sets the "primary_therapist_id" field.
func (_u *PatientUpdate) SetPrimaryTherapistID(v uuid.UUID) *PatientUpdate {
	_u.mutation.SetPrimaryTherapistID(v)
	return _u
}

// SetNillablePrimaryTherapistID sets the "primary_therapist_id" field if the given value is not nil.
func (_u *PatientUpdate) SetNillablePrimaryTherapistID(v *uuid.UUID) *PatientUpdate {
	if v != nil {
		_u.SetPrimaryTherapistID(*v)
	}
	return _u
}

// ClearPrimaryTherapistID clears the value of the "primary_therapist_id" field.
func (_u *PatientUpdate) ClearPrimaryTherapistID() *PatientUpdate {
	_u.mutation.ClearPrimaryTherapistID()
	return _u
}

// SetFileNumber sets the "file_number" field.
func (_u *PatientUpdate) SetFileNumber(v string) *PatientUpdate {
	_u.mutation.SetFileNumber(v)
	return _u
}

// SetNillableFileNumber sets the "file_number" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableFileNumber(v *string) *PatientUpdate {
	if v != nil {
		_u.SetFileNumber(*v)
	}
	return _u
}

// ClearFileNumber clears the value of the "file_number" field.
func (_u *PatientUpdate) ClearFileNumber() *PatientUpdate {
	_u.mutation.ClearFileNumber()
	return _u
}

// SetStatus sets the "status" field.
func (_u *PatientUpdate) SetStatus(v patient.Status) *PatientUpdate {
	_u.mutation.SetStatus(v)
	return _u
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableStatus(v *patient.Status) *PatientUpdate {
	if v != nil {
		_u.SetStatus(*v)
	}
	return _u
}

// SetSessionCount sets the "session_count" field.
func (_u *PatientUpdate) SetSessionCount(v int) *PatientUpdate {
	_u.mutation.ResetSessionCount()
	_u.mutation.SetSessionCount(v)
	return _u
}

// SetNillableSessionCount sets the "session_count" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableSessionCount(v *int) *PatientUpdate {
	if v != nil {
		_u.SetSessionCount(*v)
	}
	return _u
}

// AddSessionCount adds value to the "session_count" field.
func (_u *PatientUpdate) AddSessionCount(v int) *PatientUpdate {
	_u.mutation.AddSessionCount(v)
	return _u
}

// SetTotalCancellations sets the "total_cancellations" field.
func (_u *PatientUpdate) SetTotalCancellations(v int) *PatientUpdate {
	_u.mutation.ResetTotalCancellations()
	_u.mutation.SetTotalCancellations(v)
	return _u
}

// SetNillableTotalCancellations sets the "total_cancellations" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableTotalCancellations(v *int) *PatientUpdate {
	if v != nil {
		_u.SetTotalCancellations(*v)
	}
	return _u
}

// AddTotalCancellations adds value to the "total_cancellations" field.
func (_u *PatientUpdate) AddTotalCancellations(v int) *PatientUpdate {
	_u.mutation.AddTotalCancellations(v)
	return _u
}

// SetLastCancelReason sets the "last_cancel_reason" field.
func (_u *PatientUpdate) SetLastCancelReason(v string) *PatientUpdate {
	_u.mutation.SetLastCancelReason(v)
	return _u
}

// SetNillableLastCancelReason sets the "last_cancel_reason" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableLastCancelReason(v *string) *PatientUpdate {
	if v != nil {
		_u.SetLastCancelReason(*v)
	}
	return _u
}

// ClearLastCancelReason clears the value of the "last_cancel_reason" field.
func (_u *PatientUpdate) ClearLastCancelReason() *PatientUpdate {
	_u.mutation.ClearLastCancelReason()
	return _u
}

// SetHasDiscount sets the "has_discount" field.
func (_u *PatientUpdate) SetHasDiscount(v bool) *PatientUpdate {
	_u.mutation.SetHasDiscount(v)
	return _u
}

// SetNillableHasDiscount sets the "has_discount" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableHasDiscount(v *bool) *PatientUpdate {
	if v != nil {
		_u.SetHasDiscount(*v)
	}
	return _u
}

// SetDiscountPercent sets the "discount_percent" field.
func (_u *PatientUpdate) SetDiscountPercent(v int) *PatientUpdate {
	_u.mutation.ResetDiscountPercent()
	_u.mutation.SetDiscountPercent(v)
	return _u
}

// SetNillableDiscountPercent sets the "discount_percent" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableDiscountPercent(v *int) *PatientUpdate {
	if v != nil {
		_u.SetDiscountPercent(*v)
	}
	return _u
}

// AddDiscountPercent adds value to the "discount_percent" field.
func (_u *PatientUpdate) AddDiscountPercent(v int) *PatientUpdate {
	_u.mutation.AddDiscountPercent(v)
	return _u
}

// SetPaymentStatus sets the "payment_status" field.
func (_u *PatientUpdate) SetPaymentStatus(v patient.PaymentStatus) *PatientUpdate {
	_u.mutation.SetPaymentStatus(v)
	return _u
}

// SetNillablePaymentStatus sets the "payment_status" field if the given value is not nil.
func (_u *PatientUpdate) SetNillablePaymentStatus(v *patient.PaymentStatus) *PatientUpdate {
	if v != nil {
		_u.SetPaymentStatus(*v)
	}
	return _u
}

// SetTotalPaid sets the "total_paid" field.
func (_u *PatientUpdate) SetTotalPaid(v int64) *PatientUpdate {
	_u.mutation.ResetTotalPaid()
	_u.mutation.SetTotalPaid(v)
	return _u
}

// SetNillableTotalPaid sets the "total_paid" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableTotalPaid(v *int64) *PatientUpdate {
	if v != nil {
		_u.SetTotalPaid(*v)
	}
	return _u
}

// AddTotalPaid adds value to the "total_paid" field.
func (_u *PatientUpdate) AddTotalPaid(v int64) *PatientUpdate {
	_u.mutation.AddTotalPaid(v)
	return _u
}

// SetNotes sets the "notes" field.
func (_u *PatientUpdate) SetNotes(v string) *PatientUpdate {
	_u.mutation.SetNotes(v)
	return _u
}

// SetNillableNotes sets the "notes" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableNotes(v *string) *PatientUpdate {
	if v != nil {
		_u.SetNotes(*v)
	}
	return _u
}

// ClearNotes clears the value of the "notes" field.
func (_u *PatientUpdate) ClearNotes() *PatientUpdate {
	_u.mutation.ClearNotes()
	return _u
}

// SetReferralSource sets the "referral_source" field.
func (_u *PatientUpdate) SetReferralSource(v string) *PatientUpdate {
	_u.mutation.SetReferralSource(v)
	return _u
}

// SetNillableReferralSource sets the "referral_source" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableReferralSource(v *string) *PatientUpdate {
	if v != nil {
		_u.SetReferralSource(*v)
	}
	return _u
}

// ClearReferralSource clears the value of the "referral_source" field.
func (_u *PatientUpdate) ClearReferralSource() *PatientUpdate {
	_u.mutation.ClearReferralSource()
	return _u
}

// SetChiefComplaint sets the "chief_complaint" field.
func (_u *PatientUpdate) SetChiefComplaint(v string) *PatientUpdate {
	_u.mutation.SetChiefComplaint(v)
	return _u
}

// SetNillableChiefComplaint sets the "chief_complaint" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableChiefComplaint(v *string) *PatientUpdate {
	if v != nil {
		_u.SetChiefComplaint(*v)
	}
	return _u
}

// ClearChiefComplaint clears the value of the "chief_complaint" field.
func (_u *PatientUpdate) ClearChiefComplaint() *PatientUpdate {
	_u.mutation.ClearChiefComplaint()
	return _u
}

// SetIsChild sets the "is_child" field.
func (_u *PatientUpdate) SetIsChild(v bool) *PatientUpdate {
	_u.mutation.SetIsChild(v)
	return _u
}

// SetNillableIsChild sets the "is_child" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableIsChild(v *bool) *PatientUpdate {
	if v != nil {
		_u.SetIsChild(*v)
	}
	return _u
}

// SetChildBirthDate sets the "child_birth_date" field.
func (_u *PatientUpdate) SetChildBirthDate(v time.Time) *PatientUpdate {
	_u.mutation.SetChildBirthDate(v)
	return _u
}

// SetNillableChildBirthDate sets the "child_birth_date" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableChildBirthDate(v *time.Time) *PatientUpdate {
	if v != nil {
		_u.SetChildBirthDate(*v)
	}
	return _u
}

// ClearChildBirthDate clears the value of the "child_birth_date" field.
func (_u *PatientUpdate) ClearChildBirthDate() *PatientUpdate {
	_u.mutation.ClearChildBirthDate()
	return _u
}

// SetChildSchool sets the "child_school" field.
func (_u *PatientUpdate) SetChildSchool(v string) *PatientUpdate {
	_u.mutation.SetChildSchool(v)
	return _u
}

// SetNillableChildSchool sets the "child_school" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableChildSchool(v *string) *PatientUpdate {
	if v != nil {
		_u.SetChildSchool(*v)
	}
	return _u
}

// ClearChildSchool clears the value of the "child_school" field.
func (_u *PatientUpdate) ClearChildSchool() *PatientUpdate {
	_u.mutation.ClearChildSchool()
	return _u
}

// SetChildGrade sets the "child_grade" field.
func (_u *PatientUpdate) SetChildGrade(v string) *PatientUpdate {
	_u.mutation.SetChildGrade(v)
	return _u
}

// SetNillableChildGrade sets the "child_grade" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableChildGrade(v *string) *PatientUpdate {
	if v != nil {
		_u.SetChildGrade(*v)
	}
	return _u
}

// ClearChildGrade clears the value of the "child_grade" field.
func (_u *PatientUpdate) ClearChildGrade() *PatientUpdate {
	_u.mutation.ClearChildGrade()
	return _u
}

// SetParentName sets the "parent_name" field.
func (_u *PatientUpdate) SetParentName(v string) *PatientUpdate {
	_u.mutation.SetParentName(v)
	return _u
}

// SetNillableParentName sets the "parent_name" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableParentName(v *string) *PatientUpdate {
	if v != nil {
		_u.SetParentName(*v)
	}
	return _u
}

// ClearParentName clears the value of the "parent_name" field.
func (_u *PatientUpdate) ClearParentName() *PatientUpdate {
	_u.mutation.ClearParentName()
	return _u
}

// SetParentPhone sets the "parent_phone" field.
func (_u *PatientUpdate) SetParentPhone(v string) *PatientUpdate {
	_u.mutation.SetParentPhone(v)
	return _u
}

// SetNillableParentPhone sets the "parent_phone" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableParentPhone(v *string) *PatientUpdate {
	if v != nil {
		_u.SetParentPhone(*v)
	}
	return _u
}

// ClearParentPhone clears the value of the "parent_phone" field.
func (_u *PatientUpdate) ClearParentPhone() *PatientUpdate {
	_u.mutation.ClearParentPhone()
	return _u
}

// SetParentRelation sets the "parent_relation" field.
func (_u *PatientUpdate) SetParentRelation(v string) *PatientUpdate {
	_u.mutation.SetParentRelation(v)
	return _u
}

// SetNillableParentRelation sets the "parent_relation" field if the given value is not nil.
func (_u *PatientUpdate) SetNillableParentRelation(v *string) *PatientUpdate {
	if v != nil {
		_u.SetParentRelation(*v)
	}
	return _u
}

// ClearParentRelation clears the value of the "parent_relation" field.
func (_u *PatientUpdate) ClearParentRelation() *PatientUpdate {
	_u.mutation.ClearParentRelation()
	return _u
}

// SetDevelopmentalHistory sets the "developmental_history" field.
func (_u *PatientUpdate) SetDevelopmentalHistory(v map[string]interface{}) *PatientUpdate {
	_u.mutation.SetDevelopmentalHistory(v)
	return _u
}

// ClearDevelopmentalHistory clears the value of the "developmental_history" field.
func (_u *PatientUpdate) ClearDevelopmentalHistory() *PatientUpdate {
	_u.mutation.ClearDevelopmentalHistory()
	return _u
}

// SetClinic sets the "clinic" edge to the Clinic entity.
func (_u *PatientUpdate) SetClinic(v *Clinic) *PatientUpdate {
	return _u.SetClinicID(v.ID)
}

// SetUser sets the "user" edge to the User entity.
func (_u *PatientUpdate) SetUser(v *User) *PatientUpdate {
	return _u.SetUserID(v.ID)
}

// SetPrimaryTherapist sets the "primary_therapist" edge to the ClinicMember entity.
func (_u *PatientUpdate) SetPrimaryTherapist(v *ClinicMember) *PatientUpdate {
	return _u.SetPrimaryTherapistID(v.ID)
}

// AddReportIDs adds the "reports" edge to the PatientReport entity by IDs.
func (_u *PatientUpdate) AddReportIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.AddReportIDs(ids...)
	return _u
}

// AddReports adds the "reports" edges to the PatientReport entity.
func (_u *PatientUpdate) AddReports(v ...*PatientReport) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddReportIDs(ids...)
}

// AddFileIDs adds the "files" edge to the PatientFile entity by IDs.
func (_u *PatientUpdate) AddFileIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.AddFileIDs(ids...)
	return _u
}

// AddFiles adds the "files" edges to the PatientFile entity.
func (_u *PatientUpdate) AddFiles(v ...*PatientFile) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddFileIDs(ids...)
}

// AddPrescriptionIDs adds the "prescriptions" edge to the PatientPrescription entity by IDs.
func (_u *PatientUpdate) AddPrescriptionIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.AddPrescriptionIDs(ids...)
	return _u
}

// AddPrescriptions adds the "prescriptions" edges to the PatientPrescription entity.
func (_u *PatientUpdate) AddPrescriptions(v ...*PatientPrescription) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddPrescriptionIDs(ids...)
}

// AddTestIDs adds the "tests" edge to the PatientTest entity by IDs.
func (_u *PatientUpdate) AddTestIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.AddTestIDs(ids...)
	return _u
}

// AddTests adds the "tests" edges to the PatientTest entity.
func (_u *PatientUpdate) AddTests(v ...*PatientTest) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddTestIDs(ids...)
}

// Mutation returns the PatientMutation object of the builder.
func (_u *PatientUpdate) Mutation() *PatientMutation {
	return _u.mutation
}

// ClearClinic clears the "clinic" edge to the Clinic entity.
func (_u *PatientUpdate) ClearClinic() *PatientUpdate {
	_u.mutation.ClearClinic()
	return _u
}

// ClearUser clears the "user" edge to the User entity.
func (_u *PatientUpdate) ClearUser() *PatientUpdate {
	_u.mutation.ClearUser()
	return _u
}

// ClearPrimaryTherapist clears the "primary_therapist" edge to the ClinicMember entity.
func (_u *PatientUpdate) ClearPrimaryTherapist() *PatientUpdate {
	_u.mutation.ClearPrimaryTherapist()
	return _u
}

// ClearReports clears all "reports" edges to the PatientReport entity.
func (_u *PatientUpdate) ClearReports() *PatientUpdate {
	_u.mutation.ClearReports()
	return _u
}

// RemoveReportIDs removes the "reports" edge to PatientReport entities by IDs.
func (_u *PatientUpdate) RemoveReportIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.RemoveReportIDs(ids...)
	return _u
}

// RemoveReports removes "reports" edges to PatientReport entities.
func (_u *PatientUpdate) RemoveReports(v ...*PatientReport) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveReportIDs(ids...)
}

// ClearFiles clears all "files" edges to the PatientFile entity.
func (_u *PatientUpdate) ClearFiles() *PatientUpdate {
	_u.mutation.ClearFiles()
	return _u
}

// RemoveFileIDs removes the "files" edge to PatientFile entities by IDs.
func (_u *PatientUpdate) RemoveFileIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.RemoveFileIDs(ids...)
	return _u
}

// RemoveFiles removes "files" edges to PatientFile entities.
func (_u *PatientUpdate) RemoveFiles(v ...*PatientFile) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveFileIDs(ids...)
}

// ClearPrescriptions clears all "prescriptions" edges to the PatientPrescription entity.
func (_u *PatientUpdate) ClearPrescriptions() *PatientUpdate {
	_u.mutation.ClearPrescriptions()
	return _u
}

// RemovePrescriptionIDs removes the "prescriptions" edge to PatientPrescription entities by IDs.
func (_u *PatientUpdate) RemovePrescriptionIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.RemovePrescriptionIDs(ids...)
	return _u
}

// RemovePrescriptions removes "prescriptions" edges to PatientPrescription entities.
func (_u *PatientUpdate) RemovePrescriptions(v ...*PatientPrescription) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemovePrescriptionIDs(ids...)
}

// ClearTests clears all "tests" edges to the PatientTest entity.
func (_u *PatientUpdate) ClearTests() *PatientUpdate {
	_u.mutation.ClearTests()
	return _u
}

// RemoveTestIDs removes the "tests" edge to PatientTest entities by IDs.
func (_u *PatientUpdate) RemoveTestIDs(ids ...uuid.UUID) *PatientUpdate {
	_u.mutation.RemoveTestIDs(ids...)
	return _u
}

// RemoveTests removes "tests" edges to PatientTest entities.
func (_u *PatientUpdate) RemoveTests(v ...*PatientTest) *PatientUpdate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveTestIDs(ids...)
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (_u *PatientUpdate) Save(ctx context.Context) (int, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *PatientUpdate) SaveX(ctx context.Context) int {
	affected, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (_u *PatientUpdate) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *PatientUpdate) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *PatientUpdate) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := patient.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *PatientUpdate) check() error {
	if v, ok := _u.mutation.FileNumber(); ok {
		if err := patient.FileNumberValidator(v); err != nil {
			return &ValidationError{Name: "file_number", err: fmt.Errorf(`repo: validator failed for field "Patient.file_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Status(); ok {
		if err := patient.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`repo: validator failed for field "Patient.status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.PaymentStatus(); ok {
		if err := patient.PaymentStatusValidator(v); err != nil {
			return &ValidationError{Name: "payment_status", err: fmt.Errorf(`repo: validator failed for field "Patient.payment_status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ReferralSource(); ok {
		if err := patient.ReferralSourceValidator(v); err != nil {
			return &ValidationError{Name: "referral_source", err: fmt.Errorf(`repo: validator failed for field "Patient.referral_source": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ChildSchool(); ok {
		if err := patient.ChildSchoolValidator(v); err != nil {
			return &ValidationError{Name: "child_school", err: fmt.Errorf(`repo: validator failed for field "Patient.child_school": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ChildGrade(); ok {
		if err := patient.ChildGradeValidator(v); err != nil {
			return &ValidationError{Name: "child_grade", err: fmt.Errorf(`repo: validator failed for field "Patient.child_grade": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentName(); ok {
		if err := patient.ParentNameValidator(v); err != nil {
			return &ValidationError{Name: "parent_name", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentPhone(); ok {
		if err := patient.ParentPhoneValidator(v); err != nil {
			return &ValidationError{Name: "parent_phone", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_phone": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentRelation(); ok {
		if err := patient.ParentRelationValidator(v); err != nil {
			return &ValidationError{Name: "parent_relation", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_relation": %w`, err)}
		}
	}
	if _u.mutation.ClinicCleared() && len(_u.mutation.ClinicIDs()) > 0 {
		return errors.New(`repo: clearing a required unique edge "Patient.clinic"`)
	}
	if _u.mutation.UserCleared() && len(_u.mutation.UserIDs()) > 0 {
		return errors.New(`repo: clearing a required unique edge "Patient.user"`)
	}
	return nil
}

func (_u *PatientUpdate) sqlSave(ctx context.Context) (_node int, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(patient.Table, patient.Columns, sqlgraph.NewFieldSpec(patient.FieldID, field.TypeUUID))
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(patient.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.DeletedAt(); ok {
		_spec.SetField(patient.FieldDeletedAt, field.TypeTime, value)
	}
	if _u.mutation.DeletedAtCleared() {
		_spec.ClearField(patient.FieldDeletedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.FileNumber(); ok {
		_spec.SetField(patient.FieldFileNumber, field.TypeString, value)
	}
	if _u.mutation.FileNumberCleared() {
		_spec.ClearField(patient.FieldFileNumber, field.TypeString)
	}
	if value, ok := _u.mutation.Status(); ok {
		_spec.SetField(patient.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.SessionCount(); ok {
		_spec.SetField(patient.FieldSessionCount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSessionCount(); ok {
		_spec.AddField(patient.FieldSessionCount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.TotalCancellations(); ok {
		_spec.SetField(patient.FieldTotalCancellations, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedTotalCancellations(); ok {
		_spec.AddField(patient.FieldTotalCancellations, field.TypeInt, value)
	}
	if value, ok := _u.mutation.LastCancelReason(); ok {
		_spec.SetField(patient.FieldLastCancelReason, field.TypeString, value)
	}
	if _u.mutation.LastCancelReasonCleared() {
		_spec.ClearField(patient.FieldLastCancelReason, field.TypeString)
	}
	if value, ok := _u.mutation.HasDiscount(); ok {
		_spec.SetField(patient.FieldHasDiscount, field.TypeBool, value)
	}
	if value, ok := _u.mutation.DiscountPercent(); ok {
		_spec.SetField(patient.FieldDiscountPercent, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDiscountPercent(); ok {
		_spec.AddField(patient.FieldDiscountPercent, field.TypeInt, value)
	}
	if value, ok := _u.mutation.PaymentStatus(); ok {
		_spec.SetField(patient.FieldPaymentStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.TotalPaid(); ok {
		_spec.SetField(patient.FieldTotalPaid, field.TypeInt64, value)
	}
	if value, ok := _u.mutation.AddedTotalPaid(); ok {
		_spec.AddField(patient.FieldTotalPaid, field.TypeInt64, value)
	}
	if value, ok := _u.mutation.Notes(); ok {
		_spec.SetField(patient.FieldNotes, field.TypeString, value)
	}
	if _u.mutation.NotesCleared() {
		_spec.ClearField(patient.FieldNotes, field.TypeString)
	}
	if value, ok := _u.mutation.ReferralSource(); ok {
		_spec.SetField(patient.FieldReferralSource, field.TypeString, value)
	}
	if _u.mutation.ReferralSourceCleared() {
		_spec.ClearField(patient.FieldReferralSource, field.TypeString)
	}
	if value, ok := _u.mutation.ChiefComplaint(); ok {
		_spec.SetField(patient.FieldChiefComplaint, field.TypeString, value)
	}
	if _u.mutation.ChiefComplaintCleared() {
		_spec.ClearField(patient.FieldChiefComplaint, field.TypeString)
	}
	if value, ok := _u.mutation.IsChild(); ok {
		_spec.SetField(patient.FieldIsChild, field.TypeBool, value)
	}
	if value, ok := _u.mutation.ChildBirthDate(); ok {
		_spec.SetField(patient.FieldChildBirthDate, field.TypeTime, value)
	}
	if _u.mutation.ChildBirthDateCleared() {
		_spec.ClearField(patient.FieldChildBirthDate, field.TypeTime)
	}
	if value, ok := _u.mutation.ChildSchool(); ok {
		_spec.SetField(patient.FieldChildSchool, field.TypeString, value)
	}
	if _u.mutation.ChildSchoolCleared() {
		_spec.ClearField(patient.FieldChildSchool, field.TypeString)
	}
	if value, ok := _u.mutation.ChildGrade(); ok {
		_spec.SetField(patient.FieldChildGrade, field.TypeString, value)
	}
	if _u.mutation.ChildGradeCleared() {
		_spec.ClearField(patient.FieldChildGrade, field.TypeString)
	}
	if value, ok := _u.mutation.ParentName(); ok {
		_spec.SetField(patient.FieldParentName, field.TypeString, value)
	}
	if _u.mutation.ParentNameCleared() {
		_spec.ClearField(patient.FieldParentName, field.TypeString)
	}
	if value, ok := _u.mutation.ParentPhone(); ok {
		_spec.SetField(patient.FieldParentPhone, field.TypeString, value)
	}
	if _u.mutation.ParentPhoneCleared() {
		_spec.ClearField(patient.FieldParentPhone, field.TypeString)
	}
	if value, ok := _u.mutation.ParentRelation(); ok {
		_spec.SetField(patient.FieldParentRelation, field.TypeString, value)
	}
	if _u.mutation.ParentRelationCleared() {
		_spec.ClearField(patient.FieldParentRelation, field.TypeString)
	}
	if value, ok := _u.mutation.DevelopmentalHistory(); ok {
		_spec.SetField(patient.FieldDevelopmentalHistory, field.TypeJSON, value)
	}
	if _u.mutation.DevelopmentalHistoryCleared() {
		_spec.ClearField(patient.FieldDevelopmentalHistory, field.TypeJSON)
	}
	if _u.mutation.ClinicCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   patient.ClinicTable,
			Columns: []string{patient.ClinicColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinic.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ClinicIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   patient.ClinicTable,
			Columns: []string{patient.ClinicColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinic.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.UserCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.UserTable,
			Columns: []string{patient.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.UserIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.UserTable,
			Columns: []string{patient.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.PrimaryTherapistCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.PrimaryTherapistTable,
			Columns: []string{patient.PrimaryTherapistColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinicmember.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.PrimaryTherapistIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.PrimaryTherapistTable,
			Columns: []string{patient.PrimaryTherapistColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinicmember.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.ReportsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedReportsIDs(); len(nodes) > 0 && !_u.mutation.ReportsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ReportsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.FilesCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedFilesIDs(); len(nodes) > 0 && !_u.mutation.FilesCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.FilesIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.PrescriptionsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedPrescriptionsIDs(); len(nodes) > 0 && !_u.mutation.PrescriptionsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.PrescriptionsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.TestsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedTestsIDs(); len(nodes) > 0 && !_u.mutation.TestsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.TestsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _node, err = sqlgraph.UpdateNodes(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{patient.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	_u.mutation.done = true
	return _node, nil
}

// PatientUpdateOne is the builder for updating a single Patient entity.
type PatientUpdateOne struct {
	config
	fields   []string
	hooks    []Hook
	mutation *PatientMutation
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *PatientUpdateOne) SetUpdatedAt(v time.Time) *PatientUpdateOne {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetDeletedAt sets the "deleted_at" field.
func (_u *PatientUpdateOne) SetDeletedAt(v time.Time) *PatientUpdateOne {
	_u.mutation.SetDeletedAt(v)
	return _u
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableDeletedAt(v *time.Time) *PatientUpdateOne {
	if v != nil {
		_u.SetDeletedAt(*v)
	}
	return _u
}

// ClearDeletedAt clears the value of the "deleted_at" field.
func (_u *PatientUpdateOne) ClearDeletedAt() *PatientUpdateOne {
	_u.mutation.ClearDeletedAt()
	return _u
}

// SetClinicID sets the "clinic_id" field.
func (_u *PatientUpdateOne) SetClinicID(v uuid.UUID) *PatientUpdateOne {
	_u.mutation.SetClinicID(v)
	return _u
}

// SetNillableClinicID sets the "clinic_id" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableClinicID(v *uuid.UUID) *PatientUpdateOne {
	if v != nil {
		_u.SetClinicID(*v)
	}
	return _u
}

// SetUserID sets the "user_id" field.
func (_u *PatientUpdateOne) SetUserID(v uuid.UUID) *PatientUpdateOne {
	_u.mutation.SetUserID(v)
	return _u
}

// SetNillableUserID sets the "user_id" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableUserID(v *uuid.UUID) *PatientUpdateOne {
	if v != nil {
		_u.SetUserID(*v)
	}
	return _u
}

// SetPrimaryTherapistID sets the "primary_therapist_id" field.
func (_u *PatientUpdateOne) SetPrimaryTherapistID(v uuid.UUID) *PatientUpdateOne {
	_u.mutation.SetPrimaryTherapistID(v)
	return _u
}

// SetNillablePrimaryTherapistID sets the "primary_therapist_id" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillablePrimaryTherapistID(v *uuid.UUID) *PatientUpdateOne {
	if v != nil {
		_u.SetPrimaryTherapistID(*v)
	}
	return _u
}

// ClearPrimaryTherapistID clears the value of the "primary_therapist_id" field.
func (_u *PatientUpdateOne) ClearPrimaryTherapistID() *PatientUpdateOne {
	_u.mutation.ClearPrimaryTherapistID()
	return _u
}

// SetFileNumber sets the "file_number" field.
func (_u *PatientUpdateOne) SetFileNumber(v string) *PatientUpdateOne {
	_u.mutation.SetFileNumber(v)
	return _u
}

// SetNillableFileNumber sets the "file_number" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableFileNumber(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetFileNumber(*v)
	}
	return _u
}

// ClearFileNumber clears the value of the "file_number" field.
func (_u *PatientUpdateOne) ClearFileNumber() *PatientUpdateOne {
	_u.mutation.ClearFileNumber()
	return _u
}

// SetStatus sets the "status" field.
func (_u *PatientUpdateOne) SetStatus(v patient.Status) *PatientUpdateOne {
	_u.mutation.SetStatus(v)
	return _u
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableStatus(v *patient.Status) *PatientUpdateOne {
	if v != nil {
		_u.SetStatus(*v)
	}
	return _u
}

// SetSessionCount sets the "session_count" field.
func (_u *PatientUpdateOne) SetSessionCount(v int) *PatientUpdateOne {
	_u.mutation.ResetSessionCount()
	_u.mutation.SetSessionCount(v)
	return _u
}

// SetNillableSessionCount sets the "session_count" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableSessionCount(v *int) *PatientUpdateOne {
	if v != nil {
		_u.SetSessionCount(*v)
	}
	return _u
}

// AddSessionCount adds value to the "session_count" field.
func (_u *PatientUpdateOne) AddSessionCount(v int) *PatientUpdateOne {
	_u.mutation.AddSessionCount(v)
	return _u
}

// SetTotalCancellations sets the "total_cancellations" field.
func (_u *PatientUpdateOne) SetTotalCancellations(v int) *PatientUpdateOne {
	_u.mutation.ResetTotalCancellations()
	_u.mutation.SetTotalCancellations(v)
	return _u
}

// SetNillableTotalCancellations sets the "total_cancellations" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableTotalCancellations(v *int) *PatientUpdateOne {
	if v != nil {
		_u.SetTotalCancellations(*v)
	}
	return _u
}

// AddTotalCancellations adds value to the "total_cancellations" field.
func (_u *PatientUpdateOne) AddTotalCancellations(v int) *PatientUpdateOne {
	_u.mutation.AddTotalCancellations(v)
	return _u
}

// SetLastCancelReason sets the "last_cancel_reason" field.
func (_u *PatientUpdateOne) SetLastCancelReason(v string) *PatientUpdateOne {
	_u.mutation.SetLastCancelReason(v)
	return _u
}

// SetNillableLastCancelReason sets the "last_cancel_reason" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableLastCancelReason(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetLastCancelReason(*v)
	}
	return _u
}

// ClearLastCancelReason clears the value of the "last_cancel_reason" field.
func (_u *PatientUpdateOne) ClearLastCancelReason() *PatientUpdateOne {
	_u.mutation.ClearLastCancelReason()
	return _u
}

// SetHasDiscount sets the "has_discount" field.
func (_u *PatientUpdateOne) SetHasDiscount(v bool) *PatientUpdateOne {
	_u.mutation.SetHasDiscount(v)
	return _u
}

// SetNillableHasDiscount sets the "has_discount" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableHasDiscount(v *bool) *PatientUpdateOne {
	if v != nil {
		_u.SetHasDiscount(*v)
	}
	return _u
}

// SetDiscountPercent sets the "discount_percent" field.
func (_u *PatientUpdateOne) SetDiscountPercent(v int) *PatientUpdateOne {
	_u.mutation.ResetDiscountPercent()
	_u.mutation.SetDiscountPercent(v)
	return _u
}

// SetNillableDiscountPercent sets the "discount_percent" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableDiscountPercent(v *int) *PatientUpdateOne {
	if v != nil {
		_u.SetDiscountPercent(*v)
	}
	return _u
}

// AddDiscountPercent adds value to the "discount_percent" field.
func (_u *PatientUpdateOne) AddDiscountPercent(v int) *PatientUpdateOne {
	_u.mutation.AddDiscountPercent(v)
	return _u
}

// SetPaymentStatus sets the "payment_status" field.
func (_u *PatientUpdateOne) SetPaymentStatus(v patient.PaymentStatus) *PatientUpdateOne {
	_u.mutation.SetPaymentStatus(v)
	return _u
}

// SetNillablePaymentStatus sets the "payment_status" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillablePaymentStatus(v *patient.PaymentStatus) *PatientUpdateOne {
	if v != nil {
		_u.SetPaymentStatus(*v)
	}
	return _u
}

// SetTotalPaid sets the "total_paid" field.
func (_u *PatientUpdateOne) SetTotalPaid(v int64) *PatientUpdateOne {
	_u.mutation.ResetTotalPaid()
	_u.mutation.SetTotalPaid(v)
	return _u
}

// SetNillableTotalPaid sets the "total_paid" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableTotalPaid(v *int64) *PatientUpdateOne {
	if v != nil {
		_u.SetTotalPaid(*v)
	}
	return _u
}

// AddTotalPaid adds value to the "total_paid" field.
func (_u *PatientUpdateOne) AddTotalPaid(v int64) *PatientUpdateOne {
	_u.mutation.AddTotalPaid(v)
	return _u
}

// SetNotes sets the "notes" field.
func (_u *PatientUpdateOne) SetNotes(v string) *PatientUpdateOne {
	_u.mutation.SetNotes(v)
	return _u
}

// SetNillableNotes sets the "notes" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableNotes(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetNotes(*v)
	}
	return _u
}

// ClearNotes clears the value of the "notes" field.
func (_u *PatientUpdateOne) ClearNotes() *PatientUpdateOne {
	_u.mutation.ClearNotes()
	return _u
}

// SetReferralSource sets the "referral_source" field.
func (_u *PatientUpdateOne) SetReferralSource(v string) *PatientUpdateOne {
	_u.mutation.SetReferralSource(v)
	return _u
}

// SetNillableReferralSource sets the "referral_source" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableReferralSource(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetReferralSource(*v)
	}
	return _u
}

// ClearReferralSource clears the value of the "referral_source" field.
func (_u *PatientUpdateOne) ClearReferralSource() *PatientUpdateOne {
	_u.mutation.ClearReferralSource()
	return _u
}

// SetChiefComplaint sets the "chief_complaint" field.
func (_u *PatientUpdateOne) SetChiefComplaint(v string) *PatientUpdateOne {
	_u.mutation.SetChiefComplaint(v)
	return _u
}

// SetNillableChiefComplaint sets the "chief_complaint" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableChiefComplaint(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetChiefComplaint(*v)
	}
	return _u
}

// ClearChiefComplaint clears the value of the "chief_complaint" field.
func (_u *PatientUpdateOne) ClearChiefComplaint() *PatientUpdateOne {
	_u.mutation.ClearChiefComplaint()
	return _u
}

// SetIsChild sets the "is_child" field.
func (_u *PatientUpdateOne) SetIsChild(v bool) *PatientUpdateOne {
	_u.mutation.SetIsChild(v)
	return _u
}

// SetNillableIsChild sets the "is_child" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableIsChild(v *bool) *PatientUpdateOne {
	if v != nil {
		_u.SetIsChild(*v)
	}
	return _u
}

// SetChildBirthDate sets the "child_birth_date" field.
func (_u *PatientUpdateOne) SetChildBirthDate(v time.Time) *PatientUpdateOne {
	_u.mutation.SetChildBirthDate(v)
	return _u
}

// SetNillableChildBirthDate sets the "child_birth_date" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableChildBirthDate(v *time.Time) *PatientUpdateOne {
	if v != nil {
		_u.SetChildBirthDate(*v)
	}
	return _u
}

// ClearChildBirthDate clears the value of the "child_birth_date" field.
func (_u *PatientUpdateOne) ClearChildBirthDate() *PatientUpdateOne {
	_u.mutation.ClearChildBirthDate()
	return _u
}

// SetChildSchool sets the "child_school" field.
func (_u *PatientUpdateOne) SetChildSchool(v string) *PatientUpdateOne {
	_u.mutation.SetChildSchool(v)
	return _u
}

// SetNillableChildSchool sets the "child_school" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableChildSchool(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetChildSchool(*v)
	}
	return _u
}

// ClearChildSchool clears the value of the "child_school" field.
func (_u *PatientUpdateOne) ClearChildSchool() *PatientUpdateOne {
	_u.mutation.ClearChildSchool()
	return _u
}

// SetChildGrade sets the "child_grade" field.
func (_u *PatientUpdateOne) SetChildGrade(v string) *PatientUpdateOne {
	_u.mutation.SetChildGrade(v)
	return _u
}

// SetNillableChildGrade sets the "child_grade" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableChildGrade(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetChildGrade(*v)
	}
	return _u
}

// ClearChildGrade clears the value of the "child_grade" field.
func (_u *PatientUpdateOne) ClearChildGrade() *PatientUpdateOne {
	_u.mutation.ClearChildGrade()
	return _u
}

// SetParentName sets the "parent_name" field.
func (_u *PatientUpdateOne) SetParentName(v string) *PatientUpdateOne {
	_u.mutation.SetParentName(v)
	return _u
}

// SetNillableParentName sets the "parent_name" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableParentName(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetParentName(*v)
	}
	return _u
}

// ClearParentName clears the value of the "parent_name" field.
func (_u *PatientUpdateOne) ClearParentName() *PatientUpdateOne {
	_u.mutation.ClearParentName()
	return _u
}

// SetParentPhone sets the "parent_phone" field.
func (_u *PatientUpdateOne) SetParentPhone(v string) *PatientUpdateOne {
	_u.mutation.SetParentPhone(v)
	return _u
}

// SetNillableParentPhone sets the "parent_phone" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableParentPhone(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetParentPhone(*v)
	}
	return _u
}

// ClearParentPhone clears the value of the "parent_phone" field.
func (_u *PatientUpdateOne) ClearParentPhone() *PatientUpdateOne {
	_u.mutation.ClearParentPhone()
	return _u
}

// SetParentRelation sets the "parent_relation" field.
func (_u *PatientUpdateOne) SetParentRelation(v string) *PatientUpdateOne {
	_u.mutation.SetParentRelation(v)
	return _u
}

// SetNillableParentRelation sets the "parent_relation" field if the given value is not nil.
func (_u *PatientUpdateOne) SetNillableParentRelation(v *string) *PatientUpdateOne {
	if v != nil {
		_u.SetParentRelation(*v)
	}
	return _u
}

// ClearParentRelation clears the value of the "parent_relation" field.
func (_u *PatientUpdateOne) ClearParentRelation() *PatientUpdateOne {
	_u.mutation.ClearParentRelation()
	return _u
}

// SetDevelopmentalHistory sets the "developmental_history" field.
func (_u *PatientUpdateOne) SetDevelopmentalHistory(v map[string]interface{}) *PatientUpdateOne {
	_u.mutation.SetDevelopmentalHistory(v)
	return _u
}

// ClearDevelopmentalHistory clears the value of the "developmental_history" field.
func (_u *PatientUpdateOne) ClearDevelopmentalHistory() *PatientUpdateOne {
	_u.mutation.ClearDevelopmentalHistory()
	return _u
}

// SetClinic sets the "clinic" edge to the Clinic entity.
func (_u *PatientUpdateOne) SetClinic(v *Clinic) *PatientUpdateOne {
	return _u.SetClinicID(v.ID)
}

// SetUser sets the "user" edge to the User entity.
func (_u *PatientUpdateOne) SetUser(v *User) *PatientUpdateOne {
	return _u.SetUserID(v.ID)
}

// SetPrimaryTherapist sets the "primary_therapist" edge to the ClinicMember entity.
func (_u *PatientUpdateOne) SetPrimaryTherapist(v *ClinicMember) *PatientUpdateOne {
	return _u.SetPrimaryTherapistID(v.ID)
}

// AddReportIDs adds the "reports" edge to the PatientReport entity by IDs.
func (_u *PatientUpdateOne) AddReportIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.AddReportIDs(ids...)
	return _u
}

// AddReports adds the "reports" edges to the PatientReport entity.
func (_u *PatientUpdateOne) AddReports(v ...*PatientReport) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddReportIDs(ids...)
}

// AddFileIDs adds the "files" edge to the PatientFile entity by IDs.
func (_u *PatientUpdateOne) AddFileIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.AddFileIDs(ids...)
	return _u
}

// AddFiles adds the "files" edges to the PatientFile entity.
func (_u *PatientUpdateOne) AddFiles(v ...*PatientFile) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddFileIDs(ids...)
}

// AddPrescriptionIDs adds the "prescriptions" edge to the PatientPrescription entity by IDs.
func (_u *PatientUpdateOne) AddPrescriptionIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.AddPrescriptionIDs(ids...)
	return _u
}

// AddPrescriptions adds the "prescriptions" edges to the PatientPrescription entity.
func (_u *PatientUpdateOne) AddPrescriptions(v ...*PatientPrescription) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddPrescriptionIDs(ids...)
}

// AddTestIDs adds the "tests" edge to the PatientTest entity by IDs.
func (_u *PatientUpdateOne) AddTestIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.AddTestIDs(ids...)
	return _u
}

// AddTests adds the "tests" edges to the PatientTest entity.
func (_u *PatientUpdateOne) AddTests(v ...*PatientTest) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.AddTestIDs(ids...)
}

// Mutation returns the PatientMutation object of the builder.
func (_u *PatientUpdateOne) Mutation() *PatientMutation {
	return _u.mutation
}

// ClearClinic clears the "clinic" edge to the Clinic entity.
func (_u *PatientUpdateOne) ClearClinic() *PatientUpdateOne {
	_u.mutation.ClearClinic()
	return _u
}

// ClearUser clears the "user" edge to the User entity.
func (_u *PatientUpdateOne) ClearUser() *PatientUpdateOne {
	_u.mutation.ClearUser()
	return _u
}

// ClearPrimaryTherapist clears the "primary_therapist" edge to the ClinicMember entity.
func (_u *PatientUpdateOne) ClearPrimaryTherapist() *PatientUpdateOne {
	_u.mutation.ClearPrimaryTherapist()
	return _u
}

// ClearReports clears all "reports" edges to the PatientReport entity.
func (_u *PatientUpdateOne) ClearReports() *PatientUpdateOne {
	_u.mutation.ClearReports()
	return _u
}

// RemoveReportIDs removes the "reports" edge to PatientReport entities by IDs.
func (_u *PatientUpdateOne) RemoveReportIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.RemoveReportIDs(ids...)
	return _u
}

// RemoveReports removes "reports" edges to PatientReport entities.
func (_u *PatientUpdateOne) RemoveReports(v ...*PatientReport) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveReportIDs(ids...)
}

// ClearFiles clears all "files" edges to the PatientFile entity.
func (_u *PatientUpdateOne) ClearFiles() *PatientUpdateOne {
	_u.mutation.ClearFiles()
	return _u
}

// RemoveFileIDs removes the "files" edge to PatientFile entities by IDs.
func (_u *PatientUpdateOne) RemoveFileIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.RemoveFileIDs(ids...)
	return _u
}

// RemoveFiles removes "files" edges to PatientFile entities.
func (_u *PatientUpdateOne) RemoveFiles(v ...*PatientFile) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveFileIDs(ids...)
}

// ClearPrescriptions clears all "prescriptions" edges to the PatientPrescription entity.
func (_u *PatientUpdateOne) ClearPrescriptions() *PatientUpdateOne {
	_u.mutation.ClearPrescriptions()
	return _u
}

// RemovePrescriptionIDs removes the "prescriptions" edge to PatientPrescription entities by IDs.
func (_u *PatientUpdateOne) RemovePrescriptionIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.RemovePrescriptionIDs(ids...)
	return _u
}

// RemovePrescriptions removes "prescriptions" edges to PatientPrescription entities.
func (_u *PatientUpdateOne) RemovePrescriptions(v ...*PatientPrescription) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemovePrescriptionIDs(ids...)
}

// ClearTests clears all "tests" edges to the PatientTest entity.
func (_u *PatientUpdateOne) ClearTests() *PatientUpdateOne {
	_u.mutation.ClearTests()
	return _u
}

// RemoveTestIDs removes the "tests" edge to PatientTest entities by IDs.
func (_u *PatientUpdateOne) RemoveTestIDs(ids ...uuid.UUID) *PatientUpdateOne {
	_u.mutation.RemoveTestIDs(ids...)
	return _u
}

// RemoveTests removes "tests" edges to PatientTest entities.
func (_u *PatientUpdateOne) RemoveTests(v ...*PatientTest) *PatientUpdateOne {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _u.RemoveTestIDs(ids...)
}

// Where appends a list predicates to the PatientUpdate builder.
func (_u *PatientUpdateOne) Where(ps ...predicate.Patient) *PatientUpdateOne {
	_u.mutation.Where(ps...)
	return _u
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (_u *PatientUpdateOne) Select(field string, fields ...string) *PatientUpdateOne {
	_u.fields = append([]string{field}, fields...)
	return _u
}

// Save executes the query and returns the updated Patient entity.
func (_u *PatientUpdateOne) Save(ctx context.Context) (*Patient, error) {
	_u.defaults()
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *PatientUpdateOne) SaveX(ctx context.Context) *Patient {
	node, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (_u *PatientUpdateOne) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *PatientUpdateOne) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_u *PatientUpdateOne) defaults() {
	if _, ok := _u.mutation.UpdatedAt(); !ok {
		v := patient.UpdateDefaultUpdatedAt()
		_u.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *PatientUpdateOne) check() error {
	if v, ok := _u.mutation.FileNumber(); ok {
		if err := patient.FileNumberValidator(v); err != nil {
			return &ValidationError{Name: "file_number", err: fmt.Errorf(`repo: validator failed for field "Patient.file_number": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Status(); ok {
		if err := patient.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`repo: validator failed for field "Patient.status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.PaymentStatus(); ok {
		if err := patient.PaymentStatusValidator(v); err != nil {
			return &ValidationError{Name: "payment_status", err: fmt.Errorf(`repo: validator failed for field "Patient.payment_status": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ReferralSource(); ok {
		if err := patient.ReferralSourceValidator(v); err != nil {
			return &ValidationError{Name: "referral_source", err: fmt.Errorf(`repo: validator failed for field "Patient.referral_source": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ChildSchool(); ok {
		if err := patient.ChildSchoolValidator(v); err != nil {
			return &ValidationError{Name: "child_school", err: fmt.Errorf(`repo: validator failed for field "Patient.child_school": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ChildGrade(); ok {
		if err := patient.ChildGradeValidator(v); err != nil {
			return &ValidationError{Name: "child_grade", err: fmt.Errorf(`repo: validator failed for field "Patient.child_grade": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentName(); ok {
		if err := patient.ParentNameValidator(v); err != nil {
			return &ValidationError{Name: "parent_name", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentPhone(); ok {
		if err := patient.ParentPhoneValidator(v); err != nil {
			return &ValidationError{Name: "parent_phone", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_phone": %w`, err)}
		}
	}
	if v, ok := _u.mutation.ParentRelation(); ok {
		if err := patient.ParentRelationValidator(v); err != nil {
			return &ValidationError{Name: "parent_relation", err: fmt.Errorf(`repo: validator failed for field "Patient.parent_relation": %w`, err)}
		}
	}
	if _u.mutation.ClinicCleared() && len(_u.mutation.ClinicIDs()) > 0 {
		return errors.New(`repo: clearing a required unique edge "Patient.clinic"`)
	}
	if _u.mutation.UserCleared() && len(_u.mutation.UserIDs()) > 0 {
		return errors.New(`repo: clearing a required unique edge "Patient.user"`)
	}
	return nil
}

func (_u *PatientUpdateOne) sqlSave(ctx context.Context) (_node *Patient, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(patient.Table, patient.Columns, sqlgraph.NewFieldSpec(patient.FieldID, field.TypeUUID))
	id, ok := _u.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`repo: missing "Patient.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := _u.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, patient.FieldID)
		for _, f := range fields {
			if !patient.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("repo: invalid field %q for query", f)}
			}
			if f != patient.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(patient.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.DeletedAt(); ok {
		_spec.SetField(patient.FieldDeletedAt, field.TypeTime, value)
	}
	if _u.mutation.DeletedAtCleared() {
		_spec.ClearField(patient.FieldDeletedAt, field.TypeTime)
	}
	if value, ok := _u.mutation.FileNumber(); ok {
		_spec.SetField(patient.FieldFileNumber, field.TypeString, value)
	}
	if _u.mutation.FileNumberCleared() {
		_spec.ClearField(patient.FieldFileNumber, field.TypeString)
	}
	if value, ok := _u.mutation.Status(); ok {
		_spec.SetField(patient.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.SessionCount(); ok {
		_spec.SetField(patient.FieldSessionCount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSessionCount(); ok {
		_spec.AddField(patient.FieldSessionCount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.TotalCancellations(); ok {
		_spec.SetField(patient.FieldTotalCancellations, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedTotalCancellations(); ok {
		_spec.AddField(patient.FieldTotalCancellations, field.TypeInt, value)
	}
	if value, ok := _u.mutation.LastCancelReason(); ok {
		_spec.SetField(patient.FieldLastCancelReason, field.TypeString, value)
	}
	if _u.mutation.LastCancelReasonCleared() {
		_spec.ClearField(patient.FieldLastCancelReason, field.TypeString)
	}
	if value, ok := _u.mutation.HasDiscount(); ok {
		_spec.SetField(patient.FieldHasDiscount, field.TypeBool, value)
	}
	if value, ok := _u.mutation.DiscountPercent(); ok {
		_spec.SetField(patient.FieldDiscountPercent, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedDiscountPercent(); ok {
		_spec.AddField(patient.FieldDiscountPercent, field.TypeInt, value)
	}
	if value, ok := _u.mutation.PaymentStatus(); ok {
		_spec.SetField(patient.FieldPaymentStatus, field.TypeEnum, value)
	}
	if value, ok := _u.mutation.TotalPaid(); ok {
		_spec.SetField(patient.FieldTotalPaid, field.TypeInt64, value)
	}
	if value, ok := _u.mutation.AddedTotalPaid(); ok {
		_spec.AddField(patient.FieldTotalPaid, field.TypeInt64, value)
	}
	if value, ok := _u.mutation.Notes(); ok {
		_spec.SetField(patient.FieldNotes, field.TypeString, value)
	}
	if _u.mutation.NotesCleared() {
		_spec.ClearField(patient.FieldNotes, field.TypeString)
	}
	if value, ok := _u.mutation.ReferralSource(); ok {
		_spec.SetField(patient.FieldReferralSource, field.TypeString, value)
	}
	if _u.mutation.ReferralSourceCleared() {
		_spec.ClearField(patient.FieldReferralSource, field.TypeString)
	}
	if value, ok := _u.mutation.ChiefComplaint(); ok {
		_spec.SetField(patient.FieldChiefComplaint, field.TypeString, value)
	}
	if _u.mutation.ChiefComplaintCleared() {
		_spec.ClearField(patient.FieldChiefComplaint, field.TypeString)
	}
	if value, ok := _u.mutation.IsChild(); ok {
		_spec.SetField(patient.FieldIsChild, field.TypeBool, value)
	}
	if value, ok := _u.mutation.ChildBirthDate(); ok {
		_spec.SetField(patient.FieldChildBirthDate, field.TypeTime, value)
	}
	if _u.mutation.ChildBirthDateCleared() {
		_spec.ClearField(patient.FieldChildBirthDate, field.TypeTime)
	}
	if value, ok := _u.mutation.ChildSchool(); ok {
		_spec.SetField(patient.FieldChildSchool, field.TypeString, value)
	}
	if _u.mutation.ChildSchoolCleared() {
		_spec.ClearField(patient.FieldChildSchool, field.TypeString)
	}
	if value, ok := _u.mutation.ChildGrade(); ok {
		_spec.SetField(patient.FieldChildGrade, field.TypeString, value)
	}
	if _u.mutation.ChildGradeCleared() {
		_spec.ClearField(patient.FieldChildGrade, field.TypeString)
	}
	if value, ok := _u.mutation.ParentName(); ok {
		_spec.SetField(patient.FieldParentName, field.TypeString, value)
	}
	if _u.mutation.ParentNameCleared() {
		_spec.ClearField(patient.FieldParentName, field.TypeString)
	}
	if value, ok := _u.mutation.ParentPhone(); ok {
		_spec.SetField(patient.FieldParentPhone, field.TypeString, value)
	}
	if _u.mutation.ParentPhoneCleared() {
		_spec.ClearField(patient.FieldParentPhone, field.TypeString)
	}
	if value, ok := _u.mutation.ParentRelation(); ok {
		_spec.SetField(patient.FieldParentRelation, field.TypeString, value)
	}
	if _u.mutation.ParentRelationCleared() {
		_spec.ClearField(patient.FieldParentRelation, field.TypeString)
	}
	if value, ok := _u.mutation.DevelopmentalHistory(); ok {
		_spec.SetField(patient.FieldDevelopmentalHistory, field.TypeJSON, value)
	}
	if _u.mutation.DevelopmentalHistoryCleared() {
		_spec.ClearField(patient.FieldDevelopmentalHistory, field.TypeJSON)
	}
	if _u.mutation.ClinicCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   patient.ClinicTable,
			Columns: []string{patient.ClinicColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinic.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ClinicIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   patient.ClinicTable,
			Columns: []string{patient.ClinicColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinic.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.UserCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.UserTable,
			Columns: []string{patient.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.UserIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.UserTable,
			Columns: []string{patient.UserColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(user.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.PrimaryTherapistCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.PrimaryTherapistTable,
			Columns: []string{patient.PrimaryTherapistColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinicmember.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.PrimaryTherapistIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   patient.PrimaryTherapistTable,
			Columns: []string{patient.PrimaryTherapistColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(clinicmember.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.ReportsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedReportsIDs(); len(nodes) > 0 && !_u.mutation.ReportsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ReportsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.ReportsTable,
			Columns: []string{patient.ReportsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientreport.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.FilesCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedFilesIDs(); len(nodes) > 0 && !_u.mutation.FilesCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.FilesIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.FilesTable,
			Columns: []string{patient.FilesColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientfile.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.PrescriptionsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedPrescriptionsIDs(); len(nodes) > 0 && !_u.mutation.PrescriptionsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.PrescriptionsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.PrescriptionsTable,
			Columns: []string{patient.PrescriptionsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patientprescription.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if _u.mutation.TestsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.RemovedTestsIDs(); len(nodes) > 0 && !_u.mutation.TestsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.TestsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   patient.TestsTable,
			Columns: []string{patient.TestsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(patienttest.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_node = &Patient{config: _u.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{patient.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	_u.mutation.done = true
	return _node, nil
}
